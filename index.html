<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c8{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:18pt;font-family:"Arial";font-style:normal}.c23{margin-left:21.4pt;padding-top:0pt;text-indent:-0.6pt;padding-bottom:0pt;line-height:1.149539828300476;text-align:left;margin-right:22.3pt}.c12{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c5{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Arial";font-style:normal}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c18{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c30{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:24pt;font-family:"Arial";font-style:normal}.c21{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Arial";font-style:normal}.c9{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:right;height:11pt}.c26{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:24pt;font-family:"Arial";font-style:italic}.c3{margin-left:1.6pt;padding-top:22.6pt;padding-bottom:0pt;line-height:1.0;text-align:left;height:11pt}.c13{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:right;margin-right:1.2pt;height:11pt}.c6{margin-left:1.6pt;padding-top:22.6pt;padding-bottom:0pt;line-height:1.5;text-align:justify;height:11pt}.c25{margin-left:1.6pt;padding-top:22.6pt;padding-bottom:6pt;line-height:1.5;page-break-after:avoid;text-align:justify}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c22{margin-left:0.9pt;padding-top:17.7pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c15{padding-top:22.6pt;padding-bottom:0pt;line-height:1.0;text-align:left;height:11pt}.c7{padding-top:22.6pt;padding-bottom:6pt;line-height:1.0;page-break-after:avoid;text-align:left}.c10{margin-left:1.6pt;padding-top:22.6pt;padding-bottom:0pt;line-height:1.5;text-align:justify}.c14{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:right;margin-right:12.8pt}.c31{margin-left:0.9pt;padding-top:64pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c28{padding-top:115.7pt;padding-bottom:0pt;line-height:1.0;text-align:center}.c20{padding-top:108.1pt;padding-bottom:0pt;line-height:1.0;text-align:center}.c32{padding-top:6.7pt;padding-bottom:0pt;line-height:1.0;text-align:center}.c29{padding-top:62.2pt;padding-bottom:0pt;line-height:1.0;text-align:center}.c24{padding-top:63pt;padding-bottom:0pt;line-height:1.0;text-align:center}.c11{padding-top:11.4pt;padding-bottom:0pt;line-height:1.0;text-align:center}.c17{padding-top:3pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c16{background-color:#ffffff;max-width:454.6pt;padding:35.3pt 69.4pt 75.4pt 72pt}.c4{color:inherit;text-decoration:inherit}.c19{font-size:12pt}.c27{margin-left:1.6pt}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:36pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:24pt;color:#000000;font-weight:700;font-size:24pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-weight:700;font-size:18pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:14pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:12pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:2pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:11pt;color:#000000;font-weight:700;font-size:11pt;padding-bottom:2pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:10pt;color:#000000;font-weight:700;font-size:10pt;padding-bottom:2pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}</style></head><body class="c16 doc-content"><div><p class="c9"><span class="c18"></span></p></div><p class="c14"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 551.00px; height: 133.00px;"><img alt="" src="images/image1.png" style="width: 551.00px; height: 133.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c23"><span class="c2">SENAI CTTI &ndash; CENTRO DE TREINAMENTO DA TECNOLOGIA DA INFORMA&Ccedil;&Atilde;O </span></p><p class="c28"><span class="c8">Erick Fernandes de Oliveira </span></p><p class="c11"><span class="c8">Marcos Philipe Silva Nunes </span></p><p class="c11"><span class="c8">Thais Jamine Dias de Freitas Lima </span></p><p class="c11"><span class="c8">Tiago Ribeiro Maia Barbosa </span></p><p class="c20"><span class="c21">Projeto Final </span></p><p class="c24"><span class="c8">HT-IFO-01-M-22-10495 </span></p><p class="c29"><span class="c2">Belo Horizonte </span></p><p class="c32"><span class="c2">2023</span></p><p class="c13"><span class="c18"></span></p><p class="c31"><span class="c5">Sum&aacute;rio </span></p><p class="c13"><span class="c18"></span></p><p class="c3"><span class="c5"></span></p><p class="c17"><span class="c12"><a class="c4" href="#h.cinm0kfuqbuo">o que fez?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</a></span></p><p class="c17"><span class="c12"><a class="c4" href="#h.mg5rfq2e3yug">C&oacute;digo do Modelo F&iacute;sico:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</a></span></p><p class="c17"><span class="c12"><a class="c4" href="#h.euv7brul2so6">Refer&ecirc;ncias&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12</a></span></p><p class="c3"><span class="c5"></span></p><p class="c3"><span class="c5"></span></p><p class="c3"><span class="c5"></span></p><p class="c3"><span class="c5"></span></p><p class="c3"><span class="c5"></span></p><p class="c3"><span class="c5"></span></p><p class="c3"><span class="c5"></span></p><p class="c3"><span class="c5"></span></p><p class="c3"><span class="c5"></span></p><p class="c3"><span class="c5"></span></p><p class="c3"><span class="c5"></span></p><h1 class="c7" id="h.cinm0kfuqbuo"><span class="c26">o que fez?</span></h1><p class="c10"><span class="c2">Documenta&ccedil;&atilde;o t&eacute;cnica parte 1 e 2 executadas. Modelo conceitual e l&oacute;gico prontos e definidos, modelo f&iacute;sico rodando na ferramenta workbench todo corretamente.</span></p><p class="c10"><span class="c19">Tarefas, responsabilidades divididas de acordo com a especialidade de cada um, </span><span class="c19">trello</span><span class="c2">&nbsp;preenchido e sendo movimentado por todos os membros da equipe. </span></p><p class="c10"><span class="c19">A principal dificuldade encontrada foi lidar com a ferramenta</span><span class="c19">&nbsp;</span><span class="c19">BR modelo</span><span class="c2">, logo ap&oacute;s veio dificuldade em fazer os trigger conversarem entre si. &nbsp;</span></p><p class="c10"><span class="c2">Para conclus&atilde;o, marketing pessoal, pesquisa de satisfa&ccedil;&atilde;o, o slide e a plataforma rodando. </span></p><p class="c10"><span class="c2">Ferramentas a utilizar, motion canvas, vercel, google apresenta&ccedil;&otilde;es e o wix, BR modelo, workbench e googledocs.</span></p><p class="c10"><span class="c19">Para a apresenta&ccedil;&atilde;o come&ccedil;aremos com o Erick apresentando integrantes e o sum&aacute;rio e a regra de neg&oacute;cio e modelo conceitual, como tempo de 4 minutos. Marcos apresenta o modelo l&oacute;gico com 3 minutos, </span><span class="c19">Tiago</span><span class="c19">&nbsp;e Tha&iacute;s apresentam modelo f&iacute;sico com 5 minutos, tempo de </span><span class="c19">forms</span><span class="c2">&nbsp;do google e teatro 5 minutos ao todo, Marcos apresenta com 1 minuto a conclus&atilde;o.</span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><h1 class="c25" id="h.mg5rfq2e3yug"><span>C&oacute;digo do </span><span class="c30">Modelo F&iacute;sico:</span></h1><p class="c1"><span class="c2">CREATE DATABASE site;</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">USE site;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">CREATE TABLE clientes (</span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id_cliente int NOT NULL PRIMARY KEY AUTO_INCREMENT,</span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nome VARCHAR(100) NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpf VARCHAR(20) NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;email VARCHAR(25) NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;senha VARCHAR(100) NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endereco VARCHAR(200) NOT NULL</span></p><p class="c1"><span class="c2">);</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">CREATE TABLE produtos (</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; id_produtos int NOT NULL PRIMARY KEY AUTO_INCREMENT,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; nome VARCHAR(100) NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; estoque int NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; classificacao int NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; categoria_id int NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; valor DECIMAL(10, 2) NOT NULL</span></p><p class="c1"><span class="c2">);</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">CREATE TABLE categorias (</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; id_categoria int NOT NULL PRIMARY KEY AUTO_INCREMENT,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; nome VARCHAR(100) NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; descricao VARCHAR(250) NOT NULL</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; );</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">CREATE TABLE transacao (</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;id_transacao INT NOT NULL PRIMARY KEY AUTO_INCREMENT,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;cartao_credito VARCHAR(16) NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;nome_dono_cartao VARCHAR(100) NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;data_transacao DATE NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;id_cliente INT NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;id_produto INT NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;FOREIGN KEY (id_cliente) REFERENCES clientes (id_cliente),</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;FOREIGN KEY (id_produto) REFERENCES produtos (id_produtos),</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;autorizado ENUM(&#39;sim&#39;, &#39;nao&#39;) NOT NULL DEFAULT &#39;nao&#39;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;);</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">CREATE TABLE pedidos (</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; id_pedido INT NOT NULL PRIMARY KEY AUTO_INCREMENT,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; id_cliente INT NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; id_produto INT NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; data_pedido DATE NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; FOREIGN KEY (id_cliente) REFERENCES transacao (id_cliente),</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; FOREIGN KEY (id_produto) REFERENCES transacao (id_produto)</span></p><p class="c1"><span class="c2">);</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">ALTER TABLE produtos</span></p><p class="c1"><span class="c2">ADD CONSTRAINT fk_categoria</span></p><p class="c1"><span class="c2">FOREIGN KEY (categoria_id)</span></p><p class="c1"><span class="c2">REFERENCES categorias(id_categoria);</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">CREATE TABLE recomendacoes (</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; id_recomendacao INT NOT NULL PRIMARY KEY AUTO_INCREMENT,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; id_cliente INT NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; id_produto INT NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; data_recomendacao DATE NOT NULL,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; FOREIGN KEY (id_cliente) REFERENCES clientes (id_cliente),</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; FOREIGN KEY (id_produto) REFERENCES produtos (id_produtos)</span></p><p class="c1"><span class="c2">);</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">insert into clientes (nome, cpf, email, senha, endereco) values (&#39;Carlos&#39;, &#39;123.234.233-24&#39;, &#39;carlo@gmail.com&#39;,&#39;15q60f5!1T05*&#39;, &#39;Rua B&#39;),</span></p><p class="c1"><span class="c2">(&#39;Pedro&#39;, &#39;123.234.233-24&#39;, &#39;Pedro@gmail.com&#39;,&#39;1234567Vb@$&#39;,&#39;Rua A&#39;),</span></p><p class="c1"><span class="c2">(&#39;Maria&#39;, &#39;123.234.233-24&#39;, &#39;Maria@gmail.com&#39;,&#39;421a5S!49N1*65&#39;,&#39;Rua D&#39;);</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">insert into categorias (nome, descricao) values (&#39;Produos de limpeza&#39;, &#39;Esses produtos s&atilde;o essenciais para a limpeza de casas e apartamentos, sendo utilizados para lavar lou&ccedil;as, roupas, pisos, banheiros e outros ambientes.&#39;),</span></p><p class="c1"><span class="c2">(&#39;Equipamnetos Esportivos&#39;, &#39;Esses produtos s&atilde;o populares entre os brasileiros de todas as idades e n&iacute;veis de condicionamento f&iacute;sico.&#39;),</span></p><p class="c1"><span class="c2">(&#39;Equipamentos Eletronicos&#39;, &#39;Esses produtos s&atilde;o populares entre os brasileiros de todas as idades e n&iacute;veis de renda.&#39;),</span></p><p class="c1"><span class="c2">(&#39;Produtos de Enfeites&#39;, &#39;Esses produtos s&atilde;o populares entre os brasileiros que desejam decorar suas casas, apartamentos e escrit&oacute;rios. As marcas mais populares s&atilde;o aquelas que oferecem produtos de qualidade,&#39;),</span></p><p class="c1"><span class="c2">(&#39;Moveis para Casa&#39;, &#39;Esses m&oacute;veis s&atilde;o essenciais para qualquer casa e s&atilde;o usados para diversos fins, como dormir, comer, trabalhar e guardar itens.&#39;);</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">insert into produtos(nome, estoque, classificacao, categoria_id, valor) values </span></p><p class="c1"><span class="c2">(&#39;Produto A&#39;, 100, 5, 1, 10.00),</span></p><p class="c1"><span class="c2">(&#39;Detergente liquido para lou&ccedil;a&#39;, 100, 5, 1, 5.00),</span></p><p class="c1"><span class="c2">(&#39;Agua Sanitaria&#39;, 50, 4, 1, 7.50),</span></p><p class="c1"><span class="c2">(&#39;Detergente liquido para roupa&#39;, 75, 3, 1, 8.00),</span></p><p class="c1"><span class="c2">(&#39;Amaciante de roupas&#39;, 200, 2, 1, 12.50),</span></p><p class="c1"><span class="c2">(&#39;T&ecirc;nis&#39;, 30, 1, 2, 50.00),</span></p><p class="c1"><span class="c2">(&#39;Bicicleta&#39;, 80, 4, 2, 150.00),</span></p><p class="c1"><span class="c2">(&#39;Academia&#39;, 60, 3, 2, 300.00),</span></p><p class="c1"><span class="c2">(&#39;Roupas Esportivas&#39;, 90, 5, 2, 25.00),</span></p><p class="c1"><span class="c2">(&#39;Acessorios esportivos&#39;, 110, 4, 2, 15.00),</span></p><p class="c1"><span class="c2">(&#39;Equipamentos de prote&ccedil;&atilde;o&#39;,40,3,2, 20.00),</span></p><p class="c1"><span class="c2">(&#39;Gin&aacute;stica&#39;,70,2,2, 75.00),</span></p><p class="c1"><span class="c2">(&#39;Smartphone&#39;, 25, 2, 3, 400.00),</span></p><p class="c1"><span class="c2">(&#39;Notebook&#39;, 70, 3, 3, 800.00),</span></p><p class="c1"><span class="c2">(&#39;Televis&atilde;o&#39;, 45, 1, 3, 600.00),</span></p><p class="c1"><span class="c2">(&#39;Smartwatch&#39;,50,2,3, 150.00),</span></p><p class="c1"><span class="c2">(&#39;C&acirc;mera digital&#39;,70,4,3, 300.00),</span></p><p class="c1"><span class="c2">(&#39;Console de videogame&#39;, 150, 4, 3, 350.00),</span></p><p class="c1"><span class="c2">(&#39;Fone de Ouvido&#39;, 40, 2, 3, 30.00),</span></p><p class="c1"><span class="c2">(&#39;Flores artificiais&#39;, 85, 5, 4, 10.00),</span></p><p class="c1"><span class="c2">(&#39;Quadros e telas&#39;, 120, 3, 4, 50.00),</span></p><p class="c1"><span class="c2">(&#39;Objetos decorativos&#39;, 55, 2, 4, 25.00),</span></p><p class="c1"><span class="c2">(&#39;Papel de parede&#39;, 65, 4, 4, 15.00),</span></p><p class="c1"><span class="c2">(&#39;Cortinas e persianas&#39;, 95, 5, 4, 20.00),</span></p><p class="c1"><span class="c2">(&#39;Ilumina&ccedil;a&otilde; Decorativa&#39;, 35, 1, 4, 12.00),</span></p><p class="c1"><span class="c2">(&#39;Sof&aacute;&#39;, 75, 3, 5, 200.00),</span></p><p class="c1"><span class="c2">(&#39;Cama&#39;, 50, 2, 5, 120.00),</span></p><p class="c1"><span class="c2">(&#39;Guarda-Roupa&#39;, 110, 4, 5, 180.00),</span></p><p class="c1"><span class="c2">(&#39;Mesa de jantar&#39;, 70, 5, 5, 250.00),</span></p><p class="c1"><span class="c2">(&#39;Cozinha&#39;, 80, 2, 5, 300.00),</span></p><p class="c1"><span class="c2">(&#39;Arm&aacute;rio&#39;,90,3,5, 150.00);</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">-- trigger respons&aacute;vel por &nbsp;inserir recomenda&ccedil;&otilde;es da mesma categoria na tabela </span></p><p class="c1"><span class="c2">-- recomedacoes como tamb&eacute;m se j&aacute; houver pelo menos 2 recomenda&ccedil;&otilde;es, apague a mais </span></p><p class="c1"><span class="c2">-- antiga e chama o procedimento RemoverColunasRepetidas</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp;</span></p><p class="c1"><span class="c2">DELIMITER //</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">CREATE TRIGGER GerarRecomendacoes</span></p><p class="c1"><span class="c2">AFTER INSERT ON pedidos</span></p><p class="c1"><span class="c2">FOR EACH ROW</span></p><p class="c1"><span class="c2">BEGIN</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; DECLARE categoria_escolhida INT;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; DECLARE cliente_id INT;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Obtenha a categoria do produto escolhido no novo pedido</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; SELECT categoria_id INTO categoria_escolhida</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; FROM produtos</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; WHERE id_produtos = NEW.id_produto;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Obtenha o ID do cliente que fez o pedido</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; SELECT id_cliente INTO cliente_id</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; FROM pedidos</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; WHERE id_pedido = NEW.id_pedido;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Verifique se o cliente j&aacute; comprou produtos dessa categoria</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; SET @JaComprou = (</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; SELECT COUNT(*)</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; FROM pedidos AS p</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; JOIN produtos AS pr ON p.id_produto = pr.id_produtos</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; WHERE p.id_cliente = cliente_id</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; AND pr.categoria_id = categoria_escolhida</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; );</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Se o cliente j&aacute; comprou produtos dessa categoria, insira recomenda&ccedil;&otilde;es da mesma categoria</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; IF @JaComprou &gt; 0 THEN</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; -- Verifique o n&uacute;mero de recomenda&ccedil;&otilde;es existentes para este cliente</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; SET @numRecomendacoes = (</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SELECT COUNT(*)</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FROM recomendacoes</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE id_cliente = cliente_id</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; );</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; -- Se j&aacute; houver pelo menos 2 recomenda&ccedil;&otilde;es, apague a mais antiga</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; IF @numRecomendacoes &gt;= 2 THEN</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DELETE FROM recomendacoes</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WHERE id_cliente = cliente_id</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ORDER BY data_recomendacao ASC</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LIMIT 1;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; END IF;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; -- Insira a nova recomenda&ccedil;&atilde;o</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; INSERT INTO recomendacoes (id_cliente, id_produto, data_recomendacao)</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; SELECT cliente_id, pr.id_produtos, CURDATE()</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; FROM produtos AS pr</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; WHERE pr.categoria_id = categoria_escolhida</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; AND pr.id_produtos &lt;&gt; NEW.id_produto</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; AND pr.classificacao &gt;= 3</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; LIMIT 10; -- Limite o n&uacute;mero de recomenda&ccedil;&otilde;es, se necess&aacute;rio</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; END IF;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Ap&oacute;s gerar as recomenda&ccedil;&otilde;es, remova as colunas repetidas</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; CALL RemoverColunasRepetidas();</span></p><p class="c1"><span class="c2">END;</span></p><p class="c1"><span class="c2">//</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">DELIMITER ;</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">-- trigger respons&aacute;vel por transferir as informa&ccedil;&otilde;es da tabela transacao para a tabela pedidos</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">DELIMITER //</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">CREATE TRIGGER TransacaoParaPedidos</span></p><p class="c1"><span class="c2">AFTER INSERT ON transacao</span></p><p class="c1"><span class="c2">FOR EACH ROW</span></p><p class="c1"><span class="c2">BEGIN</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; INSERT INTO pedidos (id_cliente, id_produto, data_pedido)</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; VALUES (NEW.id_cliente, NEW.id_produto, NEW.data_transacao);</span></p><p class="c1"><span class="c2">END;</span></p><p class="c1"><span class="c2">//</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">DELIMITER ;</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">-- trigger respons&aacute;vel por verificar com um sim ou nao se a transa&ccedil;&atilde;o foi aceita</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">DELIMITER //</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">CREATE TRIGGER VerificarTransacaoAutorizada</span></p><p class="c1"><span class="c2">BEFORE INSERT ON pedidos</span></p><p class="c1"><span class="c2">FOR EACH ROW</span></p><p class="c1"><span class="c2">BEGIN</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; DECLARE autorizacao VARCHAR(3);</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Verificar se a transa&ccedil;&atilde;o para o cliente e produto foi autorizada</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; SELECT autorizado INTO autorizacao</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; FROM transacao</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; WHERE id_cliente = NEW.id_cliente</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; AND id_produto = NEW.id_produto</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; ORDER BY data_transacao DESC</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; LIMIT 1;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Se a transa&ccedil;&atilde;o n&atilde;o foi autorizada, impedir a inser&ccedil;&atilde;o na tabela pedidos</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; IF autorizacao IS NULL OR autorizacao &lt;&gt; &#39;sim&#39; THEN</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; SIGNAL SQLSTATE &#39;45000&#39;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; SET MESSAGE_TEXT = &#39;Transa&ccedil;&atilde;o n&atilde;o autorizada. Pedido n&atilde;o pode ser inserido.&#39;;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; END IF;</span></p><p class="c1"><span class="c2">END;</span></p><p class="c1"><span class="c2">//</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">DELIMITER ;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">-- procedimento respons&aacute;vel por remover informa&ccedil;&otilde;es repetidas da coluna recomendacoes</span></p><p class="c1"><span class="c2">DELIMITER //</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">CREATE PROCEDURE RemoverColunasRepetidas()</span></p><p class="c1"><span class="c2">BEGIN</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Vari&aacute;veis locais</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; DECLARE done INT DEFAULT 0;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; DECLARE cliente_id INT;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; DECLARE produto_id INT;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Definir um cursor para selecionar as duplicatas</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; DECLARE cur CURSOR FOR</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; SELECT id_cliente, id_produto</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; FROM recomendacoes</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; GROUP BY id_cliente, id_produto</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; HAVING COUNT(*) &gt; 1;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Lidar com exce&ccedil;&otilde;es</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Desativar temporariamente o safe update mode</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; SET @old_safe_update := @@SESSION.sql_safe_updates;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; SET SQL_SAFE_UPDATES = 0;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Iniciar o loop</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; OPEN cur;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Loop para cada duplicata</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; read_loop: LOOP</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; -- Buscar os valores do cursor</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; FETCH cur INTO cliente_id, produto_id;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; -- Verificar se n&atilde;o h&aacute; mais linhas</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; IF done = 1 THEN</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEAVE read_loop;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; END IF;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; -- Excluir a linha mais antiga</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; DELETE FROM recomendacoes</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; WHERE id_cliente = cliente_id</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; AND id_produto = produto_id</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; ORDER BY data_recomendacao ASC</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; LIMIT 1;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; END LOOP;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Fechar o cursor</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; CLOSE cur;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; -- Ativar o safe update mode novamente</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; SET SQL_SAFE_UPDATES = @old_safe_update;</span></p><p class="c1"><span class="c2">END;</span></p><p class="c1"><span class="c2">//</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">DELIMITER ;</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">-- procedimento respons&aacute;vel por inserir informa&ccedil;&otilde;es na tabela transa&ccedil;&atilde;o </span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">DELIMITER //</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">CREATE PROCEDURE InserirTransacao(</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; IN p_cartao_credito VARCHAR(16),</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; IN p_nome_dono_cartao VARCHAR(100),</span></p><p class="c1"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in data_transacao DATE,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; IN p_id_cliente INT,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; IN p_id_produto INT,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; IN p_autorizado ENUM(&#39;sim&#39;, &#39;nao&#39;)</span></p><p class="c1"><span class="c2">)</span></p><p class="c1"><span class="c2">BEGIN</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; INSERT INTO transacao (cartao_credito, nome_dono_cartao, data_transacao, id_cliente, id_produto, autorizado)</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; VALUES (p_cartao_credito, p_nome_dono_cartao, NOW(), p_id_cliente, p_id_produto, p_autorizado);</span></p><p class="c1"><span class="c2">END;</span></p><p class="c1"><span class="c2">//</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">DELIMITER ;</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">-- Inserir uma transa&ccedil;&atilde;o autorizada na tabela transacao </span></p><p class="c1"><span class="c2">CALL InserirTransacao(&#39;1234567890123456&#39;, &#39;Jo&atilde;o da Silva&#39;, NOW(), 2, 15, &#39;sim&#39;);</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">&nbsp; &nbsp; </span></p><p class="c1"><span class="c2">&nbsp; &nbsp; SELECT r.id_recomendacao, c.nome AS cliente, p.nome AS produto, r.data_recomendacao</span></p><p class="c1"><span class="c2">FROM recomendacoes AS r</span></p><p class="c1"><span class="c2">JOIN clientes AS c ON r.id_cliente = c.id_cliente</span></p><p class="c1"><span class="c2">JOIN produtos AS p ON r.id_produto = p.id_produtos</span></p><p class="c1"><span class="c2">WHERE r.id_cliente = ( 2 );</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">SELECT c.nome AS NomeCliente, p.nome AS NomeProduto, pd.data_pedido AS DataPedido, p.valor AS ValorProduto</span></p><p class="c1"><span class="c2">FROM pedidos AS pd</span></p><p class="c1"><span class="c2">JOIN clientes AS c ON pd.id_cliente = c.id_cliente</span></p><p class="c1"><span class="c2">JOIN produtos AS p ON pd.id_produto = p.id_produtos;</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">select * from recomendacoes &nbsp;;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">select * from categorias &nbsp;;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">select * from pedidos ;</span></p><p class="c0"><span class="c2"></span></p><p class="c1"><span class="c2">select * from produtos ;</span></p><p class="c0"><span class="c2"></span></p><p class="c0"><span class="c18"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c3"><span class="c5"></span></p><p class="c3"><span class="c5"></span></p><p class="c3"><span class="c5"></span></p><p class="c3"><span class="c5"></span></p><p class="c3"><span class="c5"></span></p><p class="c15"><span class="c5"></span></p><h1 class="c7 c27" id="h.euv7brul2so6"><span class="c30">Refer&ecirc;ncias </span></h1><p class="c22"><span class="c2">Br modelo acessado em 18/09/2023 &agrave;s 9 horas.</span></p><p class="c22"><span class="c2">Workbench Mysql. Acessado em 19/09/2023 &agrave;s 9 e 47 minutos.</span></p></body></html>